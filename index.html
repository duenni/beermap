<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Basic Page Needs 
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <title>Beermap</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">

    <!-- Script
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!-- Favicon
    –––––––––––––––––––––––––––––––––––––––––––––––––– 
    <link rel="icon" type="image/png" href="images/favicon.png">-->

</head>
<body>

    <!-- Primary Page Layout
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        
    <!-- Menu -->
    <div class="pure-menu pure-menu-horizontal">
        <a href="#" class="pure-menu-heading pure-menu-link">Beermap</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"><a href="#" class="pure-menu-link">About</a></li>
            <li class="pure-menu-item"><a href="#" class="pure-menu-link">Contact</a></li>
        </ul>
    </div>
    
    <div id="map"></div>
    
    <script type='text/javascript' src='js/biere.json'></script>
    
    <script>
        //Initialize map
        var map = L.map('map',{
            center: [20.0, 5.0],
            zoom: 2,
            zoomControl: false
        });
        
        //Change marker icon
        var myIcon = L.icon({
            iconUrl: './images/pin24.png',
            iconRetinaUrl: './images/pin48.png',
            iconSize: [29, 24],
            iconAnchor: [9, 21],
            popupAnchor: [0, -14]
        });
        
        //Setup tile layer
        mapLink = 
            '<a href="http://openstreetmap.org">OpenStreetMap</a>';
        /*L.tileLayer(
            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; ' + mapLink + ' Contributors',
            maxZoom: 18,
            }).addTo(map); */ 
            L.tileLayer('http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
        
        //Zoom control should be bottomleft
        L.control.zoom({
            position:'bottomleft'
        }).addTo(map);
        
        //Use kimonolabs for scraping 
        $.ajax({
            "url":"https://www.kimonolabs.com/api/6qium7f6?apikey=YOURAPIKEYHERE",
            "crossDomain":true,
            "dataType":"jsonp",
            //Make a call to the Kimono API following the "url" 
    
            'success': function(response){ 
            // If the call request was successful and the data was retrieved, this function will create a list displaying the data
         
                var collection = response.results.bierherkunft;
                for ( var i=0; i < markers.length; ++i ) 
                {
                    for (var i = 0; i < collection.length; i++)
                    {   
                        L.marker( [markers[i].lat, markers[i].long], {icon: myIcon})
                        .bindPopup('<a target="_blank" href='+collection[i].name.href+'>'+collection[i].name.text+'</a><br>'+collection[i].anzahl)
                        .addTo( map );
                    }
                }
            }
        }); 
    </script>
    <!-- End Document
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>